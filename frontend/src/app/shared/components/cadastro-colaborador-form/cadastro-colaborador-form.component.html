<form [formGroup]="cadastroForm">
    <mat-form-field class="inputField" appearance="outline">
        <mat-label>Nome completo</mat-label>
        <input formControlName="nome" placeholder="Digite seu nome completo" matInput type="text" />
    </mat-form-field>
    @if (cadastroForm.get('nome')?.errors?.['minLength'] && cadastroForm.get('nome')?.touched) {
        <mat-error class="erro">O nome deve ter mais de 3 caracteres</mat-error>
    }
    @if (cadastroForm.get('nome')?.errors?.['pattern'] && cadastroForm.get('nome')?.touched) {
        <mat-error class="erro">O nome não pode conter caracteres especiais</mat-error>
    }

    <mat-form-field class="inputField" appearance="outline">
        <mat-label>CPF</mat-label>
        <input formControlName="CPF" placeholder="Digite seu CPF" matInput type="CPF" />
    </mat-form-field>
    @if (cadastroForm.get('CPF')?.invalid && cadastroForm.get('CPF')?.touched) {
        <mat-error class="erro">CPF inválido</mat-error>
    }

    <mat-form-field class="inputField" appearance="outline">
        <mat-label>Setor</mat-label>
        <mat-select formControlName="setorId">
            @for (setor of setores; track $index) {
            <mat-option [value]="setor.id">{{setor.nome}}</mat-option>
            } @empty {
                <mat-option>Nenhum setor encontrado.</mat-option>
            }
        </mat-select>
    </mat-form-field>

    @if(this.cadastroForm.get("setorId")?.value!=''){
        <mat-form-field class="inputField" appearance="outline">
            <mat-label>Cargo</mat-label>
            <mat-select formControlName="cargoId">
                @for (cargo of cargos; track $index) {
                <mat-option [value]="cargo.id">{{cargo.nome}}</mat-option>
                } @empty {
                    <mat-option>Nenhum cargo encontrado.</mat-option>
                }
            </mat-select>
        </mat-form-field>
        @if (cadastroForm.get('cargoId')?.invalid && cadastroForm.get('cargoId')?.touched) {
            <mat-error class="erro">Cargo inválido</mat-error>
        } 
    }
</form>